CREATE OR REPLACE PROCEDURE ADD_KONTO
(v_idkonta IN LOGOWANIE.ID_KONTA%TYPE,
v_idroli IN LOGOWANIE.ID_ROLI%TYPE,
v_login IN LOGOWANIE.LOGIN%TYPE,
v_haslo IN LOGOWANIE.HASLO%TYPE,
out_result OUT VARCHAR2)
AS
BEGIN
    INSERT INTO LOGOWANIE (ID_KONTA, ID_ROLI, LOGIN, HASLO)
    VALUES (v_idkonta,v_idroli,v_login,v_haslo);
    commit;
    
    out_result := 'TRUE';
    
    EXCEPTION
  WHEN OTHERS THEN 
  out_result := 'FALSE';
  ROLLBACK;
END;



CREATE OR REPLACE PROCEDURE ADD_USER
(v_idklienta IN KLIENCI.ID_KLIENTA%TYPE,
v_idadresu IN KLIENCI.ID_ADRESU%TYPE,
v_idkonta IN KLIENCI.ID_KONTA%TYPE,
v_imie IN KLIENCI.IMIE%TYPE,
v_nazwisko IN KLIENCI.NAZWISKO%TYPE,
v_telefon IN KLIENCI.NUMER_TELEFONU%TYPE,
out_result OUT VARCHAR2)
AS
BEGIN
    INSERT INTO KLIENCI (ID_KLIENTA,ID_ADRESU, ID_KONTA, IMIE, NAZWISKO, NUMER_TELEFONU)
    VALUES (v_idklienta,v_idadresu,v_idkonta,v_imie, v_nazwisko, v_telefon);
    commit;
    
    out_result := 'TRUE';
    
    EXCEPTION
  WHEN OTHERS THEN 
  out_result := 'FALSE';
  ROLLBACK;
END;



CREATE OR REPLACE PROCEDURE ADD_ADRES
(v_idadresu IN ADRESY.ID_ADRESU%TYPE,
v_miejscowosc IN ADRESY.MIEJSCOWOSC%TYPE,
v_ulica IN ADRESY.ULICA%TYPE,
v_nrdomu IN ADRESY.NUMER_DOMU%TYPE,
v_nrlokalu IN ADRESY.NUMER_LOKALU%TYPE,
v_kodpocztowy IN ADRESY.KOD_POCZTOWY%TYPE,
out_result OUT VARCHAR2)
AS
BEGIN
    INSERT INTO ADRESY (ID_ADRESU, MIEJSCOWOSC, ULICA, NUMER_DOMU, NUMER_LOKALU, KOD_POCZTOWY)
    VALUES (v_idadresu, v_miejscowosc, v_ulica, v_nrdomu, v_nrlokalu, v_kodpocztowy);
    commit;
    
    out_result := 'TRUE';
    
    EXCEPTION
  WHEN OTHERS THEN 
  out_result := 'FALSE';
  ROLLBACK;
END;


create or replace NONEDITIONABLE PROCEDURE SHOW_BOOKS(
CURSOR_1 OUT SYS_REFCURSOR)
AS
BEGIN
OPEN CURSOR_1 FOR
SELECT K.TYTUL, KA.NAZWA, A.IMIE, A.NAZWISKO, K.ILOSC_EGZEMPLARZY 
FROM KSIAZKI K
JOIN AUTORZY_KSIAZKI AK on K.ID_KSIAZKI = AK.ID_KSIAZKI 
JOIN AUTORZY A on AK.ID_AUTORA = A.ID_AUTORA
JOIN KATEGORIE KA on K.ID_KATEGORII = KA.ID_KATEGORII;
END;


CREATE OR REPLACE NONEDITIONABLE PROCEDURE SHOW_KARY(
CURSOR_2 OUT SYS_REFCURSOR)
AS
BEGIN 
OPEN CURSOR_2 FOR
SELECT TYP_KARY, KWOTA_WYNAGRADZAJACA
FROM KARY;
END;


create or replace NONEDITIONABLE PROCEDURE SHOW_WYDAWNICTWA(
CURSOR_3 OUT SYS_REFCURSOR)
AS
BEGIN 
OPEN CURSOR_3 FOR
SELECT NAZWA, MIEJSCOWOSC, ULICA, NUMER_BUDYNKU
FROM WYDAWNICTWA;
END;


create or replace NONEDITIONABLE PROCEDURE SHOW_AUTORZY(
CURSOR_4 OUT SYS_REFCURSOR)
AS
BEGIN 
OPEN CURSOR_4 FOR
SELECT IMIE, NAZWISKO, NARODOWOSC, DATA_URODZENIA, DATA_SMIERCI
FROM AUTORZY;
END;